<!-- 
  Reyes, Rhyah Austrie S.
  2022-07113
  This HTML is for Activity 4 - Dynamic Product Grid, which uses Tailwind CSS and Vanilla Javascript to render product cards from a JSON array through DOM manipulation.
-->

<!-- 
Activity 4: Dynamic rendering of a product grid using Vanilla JavaScript and JSON data. 

Requirements:
1. JSON Data Integration: Create a JSON array containing at least three product objects. Each object should have the following properties: id, name, description, price, and imageUrl.
2. Dynamic Rendering Function: Write a JavaScript function that takes a product object as an argument and returns a HTML card element representing the product. The card should include:
   - An image section displaying the product image.
   - A title section showing the product name.
   - A description section with the product description.
   - A price section formatted in Peso currency style.
   - An "Add to Cart" button with hover effects.
3. Data Iteration and Insertion: Use JavaScript to iterate over the JSON array and call the rendering function for each product. Append the resulting card elements to a designated container in the HTML document.
4. Initialization on Page Load: Ensure that the product grid is rendered automatically when the webpage loads.
-->

<!--
DO NOT MODIFY THIS PART OF THE FILE
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Product Grid</title>
    <!-- Load Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-8 min-h-screen">

    <div class="max-w-7xl mx-auto">
        <h1 class="text-4xl font-extrabold text-gray-900 mb-8 text-center">Featured Products</h1>

        <!-- Target Container for JavaScript Rendering -->
        <!-- This grid structure will hold the dynamically created product cards -->
        <div id="product-grid" class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
            <!-- Cards will be injected here by JavaScript -->
        </div>
    </div>
    <!---------------------------------------------------------------------->

    <!--
YOU MAY EDIT THIS PART OF THE FILE
-->
    <script>
        // 1. JSON Data Integration (minimum three product objects)
        // Sunscreen is the main product and two skincare items were added, such as hydrating moisturizer and brightening serum.
        const productsData = [
            {
                id: 1,
                name: "Sun Protect Sunscreen",
                description: "Lightweight sunscreen with SPF 50 that protects and moisturizes the skin. Safe for daily use and feels non-greasy.",
                price: 799.00,
                imageUrl: "https://cdn.discordapp.com/attachments/1432253570643660911/1432324206905004043/sunscreen-product.png?ex=6909ddde&is=69088c5e&hm=a33c47eba51ec0b485fc5e1cd10ed8d515a2e0f7f11e070312112747b55524fa&",
                ratingText: "4.6 (2k)"
            },
            {
                id: 2,
                name: "Hydrating Moisturizer",
                description: "A gentle cream-based moisturizer that keeps skin soft and balanced all day. Good as a makeup base.",
                price: 599.00,
                imageUrl: "https://cdn.discordapp.com/attachments/1432253570643660911/1434825285324242974/hydrating_moisturizer-photo.png?ex=6909bcad&is=69086b2d&hm=cf1bfe1e25a2f8c4d28198d5616ee5269d341842337d75a96312ec093fc7281d",
                ratingText: "4.3 (1.2k)"
            },
            {
                id: 3,
                name: "Brightening Serum",
                description: "Light serum with vitamin C to brighten the skin and reduce dark spots. Use everyday to attain the radiant look.",
                price: 875.00,
                imageUrl: "https://cdn.discordapp.com/attachments/1432253570643660911/1434825303137456189/brightening_serum-photo.png?ex=6909bcb2&is=69086b32&hm=4944978a11f60774f07bada12ea6e2fb5cc3e545025e4d1bcf9cc866da94a075",
                ratingText: "4.5 (900)"
            }
        ];

        // 2. Dynamic Rendering Function
        // This function makes the product card using DOM elements
        function renderProductCard(product) {
            // card container
            const card = document.createElement("article");
            card.className = "bg-white rounded-2xl shadow-xl overflow-hidden ring-1 ring-gray-100";

            // product image
            const imgDiv = document.createElement("div");
            imgDiv.className = "w-full h-75 sm:h-75 bg-gray-100 overflow-hidden flex items-center justify-center";
            const img = document.createElement("img");
            img.src = product.imageUrl;
            img.alt = product.name;
            img.className = "w-full h-full object-cover";
            imgDiv.appendChild(img);
            card.appendChild(imgDiv);

            // content section
            const content = document.createElement("div");
            content.className = "p-6 sm:p-8";

            // product title and rating
            const titleRow = document.createElement("div");
            titleRow.className = "flex items-start justify-between";

            const title = document.createElement("h2");
            title.className = "text-2xl sm:text-3xl font-extrabold text-slate-900 leading-tight";
            title.textContent = product.name;

            // rating section with one filled star
            const ratingWrap = document.createElement("div");
            ratingWrap.className = "flex items-center gap-2 flex-shrink-0 whitespace-nowrap";

            const star = document.createElement("div");
            star.className = "flex items-center text-yellow-500";
            star.innerHTML = `
        <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20" aria-hidden="true">
          <path d="M10 15l-5.878 3.09 1.123-6.545L.49 6.91l6.562-.954L10 0l2.948 5.956 6.562.954-4.755 4.635 1.123 6.545z"/>
        </svg>
      `;

            const ratingText = document.createElement("span");
            ratingText.className = "text-xs text-slate-500";
            ratingText.textContent = product.ratingText;

            ratingWrap.appendChild(star);
            ratingWrap.appendChild(ratingText);
            titleRow.appendChild(title);
            titleRow.appendChild(ratingWrap);
            content.appendChild(titleRow);

            // product description
            const desc = document.createElement("p");
            desc.className = "mt-4 text-slate-600 text-sm sm:text-base";
            desc.textContent = product.description;
            content.appendChild(desc);

            // price and button area
            const priceArea = document.createElement("div");
            priceArea.className = "mt-6 sm:mt-8";
            const priceRow = document.createElement("div");
            priceRow.className = "flex items-end justify-between gap-4";

            const priceInfo = document.createElement("div");
            const priceLabel = document.createElement("p");
            priceLabel.className = "text-amber-900 text-xs";
            priceLabel.textContent = "Price";
            const priceValue = document.createElement("p");
            priceValue.className = "text-amber-600 font-extrabold text-2xl sm:text-3xl tracking-tight";

            // format price in PHP
            let peso = new Intl.NumberFormat("en-PH", { style: "currency", currency: "PHP" });
            priceValue.textContent = peso.format(product.price);

            const tax = document.createElement("p");
            tax.className = "text-xs text-slate-400";
            tax.textContent = "Inclusive of all taxes";

            priceInfo.appendChild(priceLabel);
            priceInfo.appendChild(priceValue);
            priceInfo.appendChild(tax);

            // Add to Cart button
            const btnDiv = document.createElement("div");
            btnDiv.className = "flex-1";
            const btn = document.createElement("button");
            btn.className = "w-full inline-flex items-center justify-center gap-3 py-3 px-5 bg-amber-500 hover:bg-amber-600 active:bg-amber-700 text-white font-semibold rounded-xl shadow-md transition";
            btn.innerHTML = `
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 6M7 13l-2 7h14l-2-7M9 21a1 1 0 100-2 1 1 0 000 2zm6 0a1 1 0 100-2 1 1 0 000 2z"/>
        </svg> Add to Cart
      `;

            // button click event
            btn.addEventListener("click", function () {
                console.log("Added to cart:", product.name);
                btn.textContent = "Added";
                btn.disabled = true;
                btn.classList.remove("bg-amber-500", "hover:bg-amber-600", "active:bg-amber-700");
                btn.classList.add("bg-gray-400", "cursor-not-allowed");
            });

            btnDiv.appendChild(btn);
            priceRow.appendChild(priceInfo);
            priceRow.appendChild(btnDiv);
            priceArea.appendChild(priceRow);
            content.appendChild(priceArea);

            // shipping and stock info
            const meta = document.createElement("div");
            meta.className = "mt-4 text-xs text-slate-400 flex items-center justify-between";
            const ship = document.createElement("span");
            ship.textContent = "Free shipping over â‚±1,500";
            const stock = document.createElement("span");
            stock.className = "px-2 py-1 bg-slate-100 rounded-full text-slate-600";
            stock.textContent = "In stock";
            meta.appendChild(ship);
            meta.appendChild(stock);
            content.appendChild(meta);

            card.appendChild(content);
            return card;
        }

        // 3. Initialization on Page Load
        // This function displays all product cards on the page
        function loadProducts() {
            const container = document.getElementById("product-grid");
            container.innerHTML = ""; // clear container before adding new items

            for (let i = 0; i < productsData.length; i++) {
                const card = renderProductCard(productsData[i]);
                container.appendChild(card);
            }
        }

        // load products once the page is ready
        window.addEventListener("DOMContentLoaded", loadProducts);
    </script>

    <!--
DO NOT MODIFY THIS PART OF THE FILE
-->
</body>
</html>